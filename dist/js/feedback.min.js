angular.module("MyApp",[]).controller("UploadCtrl",["$scope","$http",function(e,n){e.formVissible=!1,e.name="",e.email="",e.message="",e.errors={message:!1},e.submit=function(){e.upload(e.file)},e.showForm=function(){var n=angular.element(document.querySelector("form#notification"));n.removeClass("hidden"),e.formVissible=!0},e.upload=function(a){if(0==e.message.length)return e.errors.message="Treść zgłoszenia nie może być pusta.",!1;var o=new FormData;o.append("sendFeedbackForm[attachment]",a),o.append("sendFeedbackForm[first_name]",e.name),o.append("sendFeedbackForm[last_name]","..."),o.append("sendFeedbackForm[email]",e.email),o.append("sendFeedbackForm[subject]","Zgłoszenie od czytelnika."),o.append("sendFeedbackForm[message]",e.message),o.append("publication",newscoop.feedbackPlugin.publication),o.append("feedbackUrl",newscoop.feedbackPlugin.feedbackUrl),n.post("/plugin/send-feedback",o,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(e){console.log(e)})}}]),angular.module("MyApp").directive("fileModel",["$parse",function(e){return{restrict:"A",link:function(n,a,o){var s=e(o.fileModel),t=s.assign;a.bind("change",function(){n.$apply(function(){t(n,a[0].files[0])})})}}}]),angular.module("MyApp").config(["$httpProvider",function(e){e.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}]);