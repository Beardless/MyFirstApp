angular.module("MyApp",[]).controller("UploadCtrl",["$scope","$http",function(e,a){e.feedback={formVissible:!1,name:"",email:"",message:"",file:"",errors:{message:!1}},e.showForm=function(){var a=angular.element(document.querySelector("form#notification"));a.removeClass("hidden"),e.feedback.formVissible=!0},e.submit=function(){if(0==e.feedback.message.length)return e.feedback.errors.message="Treść zgłoszenia nie może być pusta.",!1;e.feedback.errors.message=!1,0==e.feedback.name.length&&(e.feedback.name="Rysiek Anonim"),0==e.feedback.email.length&&(e.feedback.email="kontak@podlasiesiedziej.pl");var n=new FormData;n.append("sendFeedbackForm[attachment]",e.feedback.file),n.append("sendFeedbackForm[first_name]",e.feedback.name),n.append("sendFeedbackForm[last_name]","..."),n.append("sendFeedbackForm[email]",e.feedback.email),n.append("sendFeedbackForm[subject]","Zgłoszenie od czytelnika."),n.append("sendFeedbackForm[message]",e.feedback.message),n.append("publication",newscoop.feedbackPlugin.publication),n.append("feedbackUrl",newscoop.feedbackPlugin.feedbackUrl),a.post("http://newscoop.dev/plugin/send-feedback",n,{transformRequest:angular.identity,headers:{"Content-Type":void 0}}).success(function(e){console.log(e)})}}]),angular.module("MyApp").directive("fileModel",["$parse",function(e){return{restrict:"A",link:function(a,n,o){var s=e(o.fileModel),d=s.assign;n.bind("change",function(){a.$apply(function(){d(a,n[0].files[0])})})}}}]),angular.module("MyApp").config(["$httpProvider",function(e){e.defaults.headers.common["X-Requested-With"]="XMLHttpRequest"}]);